<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wealth Manager Pro</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <link rel="manifest" href="wealth/manifest.json">
    <meta name="theme-color" content="#0d6efd">
    <link rel="stylesheet" href="wealth/wealth.css">
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/2488/2488749.png" type="image/x-icon">
    
    <style>
        #toast-container { position: fixed; bottom: 20px; right: 20px; z-index: 9999; }
        .stat-card { transition: transform 0.2s; cursor: default; }
        .stat-card:hover { transform: translateY(-5px); }
        .prediction-box { font-size: 0.85rem; border-top: 1px dashed #ccc; margin-top: 10px; padding-top: 10px; }
        
        #auth-section {
            min-height: 80vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .auth-card {
            width: 100%;
            max-width: 400px;
            padding: 2rem;
            border-radius: 20px;
        }

        .profile-pic-container {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            overflow: hidden;
            border: 2px solid #0d6efd;
            background: #eee;
        }
        .profile-pic-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .dropdown-toggle::after { display: none; } 
    </style>
</head>
<body class="d-flex flex-column min-vh-100">

    <div id="auth-section">
        <div class="card auth-card shadow-lg border-0">
            <div class="text-center mb-4">
                <img src="https://cdn-icons-png.flaticon.com/512/2488/2488749.png" width="60" class="mb-2">
                <h3 class="fw-bold dark-text-fix">MirÃ«sevini</h3>
                <p class="text-muted">KyÃ§u ose krijo llogari</p>
            </div>
            <div id="auth-form">
                <div class="mb-3">
                    <label class="form-label dark-text-fix">PÃ«rdoruesi</label>
                    <input type="text" id="username" class="form-control" placeholder="Shkruaj emrin...">
                </div>
                <div class="mb-3">
                    <label class="form-label dark-text-fix">FjalÃ«kalimi</label>
                    <input type="password" id="password" class="form-control" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                </div>

                <div id="register-fields" style="display: none;">
                    <div class="mb-3">
                        <label class="form-label dark-text-fix">Konfirmo FjalÃ«kalimin</label>
                        <input type="password" id="confirm-password" class="form-control" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                    </div>
                    <div class="mb-3">
                        <label class="form-label dark-text-fix">Pyetje Sigurie: Emri i kafshÃ«s suaj?</label>
                        <input type="text" id="security-answer" class="form-control" placeholder="PÃ«rgjigja juaj...">
                    </div>
                </div>
                
                <button class="btn btn-primary w-100 fw-bold py-2 mb-2" onclick="handleAuth()">Vazhdo</button>
                
                <div class="text-center">
                    <button class="btn btn-link btn-sm text-decoration-none" onclick="toggleForgetPass()">Harrova fjalÃ«kalimin?</button>
                </div>
                <p class="text-center small text-muted mt-3">ShÃ«nim: NÃ«se emri nuk ekziston, do tÃ« hapen fushat e regjistrimit.</p>
            </div>
        </div>
    </div>

    <div id="main-app" style="display: none;">
        <div class="container mt-5">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div class="dropdown">
                    <div class="d-flex align-items-center dropdown-toggle" id="profileDropdown" data-bs-toggle="dropdown" aria-expanded="false" style="cursor: pointer;">
                        <div class="profile-pic-container me-2 shadow-sm">
                            <img id="user-photo" src="https://ui-avatars.com/api/?name=User&background=random" alt="Profile">
                        </div>
                        <div class="dark-text-fix">
                            <small class="text-muted d-block" style="font-size: 0.7rem;">PÃ«rdoruesi</small>
                            <span id="user-display" class="fw-bold"></span>
                        </div>
                    </div>
                    <ul class="dropdown-menu shadow border-0 mt-2" aria-labelledby="profileDropdown">
                        <li>
                            <label class="dropdown-item" style="cursor: pointer;">
                                ğŸ“¸ Ndrysho Foton
                                <input type="file" id="upload-photo" hidden accept="image/*">
                            </label>
                        </li>
                        <li><button class="dropdown-item" onclick="changePassword()">ğŸ”‘ Ndrysho FjalÃ«kalimin</button></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><button class="dropdown-item text-danger" onclick="logout()">ğŸšª Dalja (Logout)</button></li>
                    </ul>
                </div>

                <button class="btn btn-secondary btn-sm" id="theme-toggle">ğŸŒ™ Dark Mode</button>
            </div>

            <div class="text-center mb-5">
                <img src="https://cdn-icons-png.flaticon.com/512/2488/2488749.png" alt="Logo" width="60" class="mb-3 logo-animation">
                <h2 class="dark-text-fix fw-bold">Wealth Manager Pro</h2>
            </div>
            
            <div class="row">
                <div class="col-md-4">
                    <div class="card shadow-sm mb-4 border-0 text-center">
                        <div class="card-body">
                            <h5 class="text-muted mb-2">Bilanci Total</h5>
                            <h2 id="balance" class="fw-bold display-6">0.00â‚¬</h2>
                            <select id="currency-select" class="form-select form-select-sm mt-3 w-75 mx-auto">
                                <option value="EUR">Euro (â‚¬)</option>
                                <option value="ALL">LekÃ« (L)</option>
                                <option value="USD">Dollar ($)</option>
                            </select>
                        </div>
                    </div>

                    <div class="card shadow-sm mb-4 border-0">
                        <div class="card-body">
                            <div class="row g-2 mb-3">
                                <div class="col-6">
                                    <div class="card stat-card border-0 bg-success text-white text-center p-2">
                                        <small>Fitimi</small>
                                        <h6 id="money-plus" class="fw-bold mb-0">0â‚¬</h6>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="card stat-card border-0 bg-danger text-white text-center p-2">
                                        <small>Shpenzimi</small>
                                        <h6 id="money-minus" class="fw-bold mb-0">0â‚¬</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="prediction-box dark-text-fix">
                                <div class="d-flex justify-content-between">
                                    <span>Mesatarja ditore:</span>
                                    <span id="avg-daily" class="fw-bold">0â‚¬</span>
                                </div>
                                <div class="d-flex justify-content-between mt-1">
                                    <span>Parashikimi mujor:</span>
                                    <span id="monthly-predict" class="fw-bold">0â‚¬</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow-sm mb-4 border-0">
                        <div class="card-body">
                            <h5 class="text-muted mb-2">Limiti i Buxhetit</h5>
                            <input type="number" id="budget-limit" class="form-control mb-2" placeholder="Cakto limitin...">
                            <div class="progress" style="height: 10px;">
                                <div id="budget-progress" class="progress-bar bg-success" role="progressbar" style="width: 0%"></div>
                            </div>
                            <small id="budget-warning" class="text-muted mt-2 d-block"></small>
                        </div>
                    </div>

                    <div class="card shadow-sm mb-4 border-0">
                        <div class="card-body">
                            <canvas id="myChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="col-md-8">
                    <div class="card shadow-sm p-4 border-0">
                        <h5 class="mb-4 dark-text-fix">Shto Transaksion</h5>
                        <form id="transaction-form">
                            <div class="mb-3">
                                <label class="form-label dark-text-fix">PÃ«rshkrimi</label>
                                <input type="text" id="text" class="form-control" placeholder="Psh: Rroga..." required>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label dark-text-fix">Kategoria</label>
                                    <select id="category" class="form-select">
                                        <option value="Ushqim">ğŸ›’ Ushqim</option>
                                        <option value="Transport">ğŸš— Transport</option>
                                        <option value="Qira">ğŸ  Qira & Fatura</option>
                                        <option value="ArgÃ«tim">ğŸ® ArgÃ«tim</option>
                                        <option value="RrogÃ«">ğŸ’° RrogÃ«</option>
                                        <option value="TÃ« tjera">ğŸ“¦ TÃ« tjera</option>
                                    </select>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label dark-text-fix">Data</label>
                                    <input type="date" id="date" class="form-control" required>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label dark-text-fix">Shuma (Euro)</label>
                                <input type="number" id="amount" class="form-control" placeholder="-50" required>
                            </div>
                            <button type="submit" class="btn btn-primary w-100 fw-bold py-2">Shto Transaksionin</button>
                        </form>
                    </div>

                    <div class="mt-5 mb-5">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h4 class="dark-text-fix m-0">Historia</h4>
                            <div>
                                <button type="button" class="btn btn-outline-success btn-sm me-2" onclick="downloadPDF()">ğŸ“„ PDF</button>
                                <button type="button" class="btn btn-outline-danger btn-sm" onclick="clearAll()">ğŸ—‘ï¸ Fshij</button>
                            </div>
                        </div>

                        <div class="row mb-3 g-2">
                            <div class="col-md-4">
                                <input type="text" id="search" class="form-control" placeholder="KÃ«rko...">
                            </div>
                            <div class="col-md-4">
                                <select id="filter-category" class="form-select">
                                    <option value="all">TÃ« gjitha kategoritÃ«</option>
                                    <option value="plus">Fitimet</option>
                                    <option value="minus">Shpenzimet</option>
                                    <option value="Ushqim">ğŸ›’ Ushqim</option>
                                    <option value="Transport">ğŸš— Transport</option>
                                    <option value="Qira">ğŸ  Qira</option>
                                    <option value="ArgÃ«tim">ğŸ® ArgÃ«tim</option>
                                    <option value="RrogÃ«">ğŸ’° RrogÃ«</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <input type="month" id="month-filter" class="form-control">
                            </div>
                        </div>

                        <ul id="list" class="list-group shadow-sm"></ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="toast-container"></div>

    <footer class="footer mt-auto py-4">
        <div class="container text-center">
            <hr class="mb-4 opacity-25">
            <p class="mb-2 dark-text-fix">Â© 2026 Wealth Manager Pro. TÃ« gjitha tÃ« drejtat e rezervuara.</p>
            <p class="mb-3 dark-text-fix">
                Developed by 
                <a href="https://www.ensargashi.com" target="_blank" class="fw-bold text-primary text-decoration-none author-link">
                    Ensar Gashi
                </a>
            </p>
            
            <div class="social-links">
                <a href="https://wa.me/38349200528" target="_blank" class="mx-2 text-success"><i class="fab fa-whatsapp fa-lg"></i></a>
                <a href="https://www.linkedin.com/in/ensar-gashi/" target="_blank" class="mx-2 text-primary"><i class="fab fa-linkedin fa-lg"></i></a>
                <a href="https://www.facebook.com/ensar.gashi.940" target="_blank" class="mx-2 text-info"><i class="fab fa-facebook fa-lg"></i></a>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script src="wealth/wealth.js"></script>
</body>
</html>
